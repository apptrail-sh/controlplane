spring:
  application:
    name: controlplane
  datasource:
    driver-class-name: org.postgresql.Driver
  cloud:
    gcp:
      pubsub:
        enabled: ${PUBSUB_ENABLED:false}

app:
  clusters:
    # Map clusterId to environment name
    environments:
      # Example: cluster-staging-gke-usce1: staging
      # Example: cluster-prod-gke-usce1: production
    environment-order:
      - dev
      - staging
      - testing
      - production
    # Shard mapping - supports cluster-level and cluster.namespace-level
    # Example configuration:
    # shards:
    #   # Cluster-level: applies to all namespaces in this cluster
    #   cluster1-gke-usce1:
    #     name: canary
    #     order: 0
    #   cluster2-gke-usce1:
    #     name: main
    #     order: 1
    #   # Namespace-level: overrides cluster-level for specific namespace
    #   # Format: "clusterName.namespace"
    #   cluster2-gke-usce1.special-ns:
    #     name: shard02
    #     order: 2
    shards: {}
  ingest:
    http:
      enabled: true
    pubsub:
      enabled: ${PUBSUB_ENABLED:false}
      subscription: ${PUBSUB_SUBSCRIPTION:}
    team-label: team
  gitprovider:
    github:
      enabled: ${GITHUB_APP_ENABLED:false}
      app-id: ${GITHUB_APP_ID:}
      private-key-path: ${GITHUB_APP_PRIVATE_KEY_PATH:}
      private-key-base64: ${GITHUB_APP_PRIVATE_KEY_BASE64:}
      api-base-url: ${GITHUB_API_BASE_URL:https://api.github.com}
  release-fetch:
    enabled: true
    interval-ms: ${RELEASE_FETCH_INTERVAL_MS:30000}
  cors:
    allowed-origins:
      - "http://localhost:5173"
      - "http://localhost:3000"
    allowed-methods:
      - "GET"
      - "POST"
      - "PUT"
      - "PATCH"
      - "DELETE"
      - "OPTIONS"
    allowed-headers:
      - "*"
    allow-credentials: false
    max-age: 3600

server:
  port: 3000
